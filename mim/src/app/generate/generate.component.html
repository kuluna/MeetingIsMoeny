<form [ngFormOptions]="{ updateOn: 'blur' }" (ngSubmit)="onSubmit()">
  {{formJson()}}

  <h2>新しい会議</h2>
  <div class="form-group">
    <label for="name">会議名</label>
    <input type="text" class="form-control" id="name" name="name" [(ngModel)]="form.name" required minlength="1">
  </div>

  <div class="form-group">
    <label for="start">開始時間</label>
    <input type="datetime-local" class="form-control" id="start" name="start" [(ngModel)]="form.start" (blur)="sanitize()" required>
  </div>

  <div class="form-group">
    <label for="end">終了時間</label>
    <input type="datetime-local" class="form-control" id="end" name="end" [(ngModel)]="form.end" required>
  </div>

  <h2>メンバー</h2>
  <div *ngFor="let member of form.members; index as i;">
    <div class="form-group">
      <label for="end">名前</label>
      <input type="text" class="form-control" name="member_name" [(ngModel)]="member.name" required>
    </div>
    <div class="form-group">
      <label for="end">時給</label>
      <input type="number" class="form-control" name="hourly" [(ngModel)]="member.hourly" required>
    </div>
    <button type="button" (click)="removeMember(i)" class="btn btn-outline-danger">削除</button>
  </div>

  <button type="button" (click)="newMember()" class="btn btn-secondary">メンバーを追加</button> (後から追加もできます)

  <div class="form-group">
    <div class="form-check">
      <input type="checkbox" class="form-check-input" id="hiddenMemberPay" name="hiddenMemberPay" [(ngModel)]="form.hiddenMemberPay" required>
      <label for="hiddenMemberPay">時給を隠す</label>
    </div>
  </div>

  <div class="form-group">
    <div class="form-check">
      <input type="checkbox" class="form-check-input" id="agree" name="agree" [(ngModel)]="form.agree" required>
      <label for="agree">この会議を有意義なものにします</label>
    </div>
  </div>
  <button type="submit" [disabled]="form.invalid()" class="btn btn-primary">会議を作る</button>
</form>
